<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxe Properties - Villa Clara</title>
    <link rel="stylesheet" href="../../../assets/styles/main.css">
    <link rel="stylesheet" href="../../../assets/styles/components/accordion.css">
    <link rel="stylesheet" href="../../../assets/styles/components/category-tree.css">
    <link rel="stylesheet" href="../../../assets/styles/components/card.css">
    <link rel="stylesheet" href="../../../assets/styles/components/modal.css">
    <link rel="stylesheet" href="../../../assets/styles/components/search.css">
    <link rel="stylesheet" href="../../../assets/styles/components/contacts.css">
    <link rel="stylesheet" href="../../../assets/styles/components/layout.css">
    <link rel="stylesheet" href="../../../assets/styles/components/services.css">
    <link rel="stylesheet" href="../../../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Botón flotante de retorno -->
        <button class="back-to-menu-float" id="back-to-menu-float">
            <i class="fas fa-arrow-left"></i>
            Back to Categories
        </button>
        <header class="main-header">
            <div class="logo-container">
                <img src="/assets/images/logo.png" alt="Luxe Properties Logo" class="logo">
            </div>
        </header>

        <main>
            <div class="property-welcome">
                <img src="" alt="" class="property-image">
                <h1 id="propertyTitle"></h1>
                <h3></h3>
                <div class="property-actions">
                    <a href="/index.html" class="back-to-home">
                        <i class="fas fa-home"></i>
                        <span>Back to home</span>
                    </a>
                    <button class="view-map-btn map-highlight-btn" id="openMapButton">
  <i class="fas fa-map-marked-alt"></i>
  <span>View Location/Property Map</span>
</button>
                </div>
            </div>

            <!-- =====================
                 MODAL DEL MAPA (DOCUMENTADA)
                 ===================== -->
            <div id="mapModal" class="modal map-modal-content" style="display: none;">
              <!-- Botón para cerrar la modal -->
              <button id="closeMapButton" class="modal-close-btn" aria-label="Cerrar mapa">
                <i class="fas fa-times"></i>
              </button>

              <!-- Contenedor principal del mapa (necesario para Panzoom) -->
              <div class="map-container">
                <!-- Imagen del mapa sobre la que se aplica Panzoom -->
                <img
                  id="propertyMapImage"
                  src="/assets/images/mapa_villa_clara.png"
                  alt="Mapa de la propiedad"
                  draggable="false"
                />

                <!-- Controles de zoom (siempre visibles y accesibles) -->
                <div class="zoom-controls">
                  <button class="zoom-btn zoom-in" aria-label="Acercar">
                    <i class="material-icons">zoom_in</i>
                  </button>
                  <button class="zoom-btn zoom-out" aria-label="Alejar">
                    <i class="material-icons">zoom_out</i>
                  </button>
                  <button class="zoom-btn zoom-reset" aria-label="Restablecer">
                    <i class="material-icons">center_focus_strong</i>
                  </button>
                </div>
              </div>

              <!-- Mensaje opcional de advertencia para orientación vertical en móvil -->
              <div id="orientation-warning" class="orientation-warning" style="display: none;">
  <i class="fas fa-exclamation-triangle"></i>
  For best experience, please rotate your device to landscape mode.
</div>
            </div>
            <!-- =====================
                 FIN MODAL DEL MAPA
                 ===================== -->

            <div class="two-column-layout">
                <!-- Columna de información de la propiedad -->
                <div class="property-column">
                    <h2 class="column-title">Property Information</h2>
                    <div class="info-section">
                        <div class="info-group">
                            <h3>Wifi Information</h3>
                            <ul class="info-list" style="list-style: none;">
                                <!-- WiFi information will be inserted dynamically -->
                            </ul>
                        </div>
                        
                        <hr class="section-divider">
                        
                        <div class="info-group">
                            <h3>Parking Information</h3>
                            <ul class="info-list" style="list-style: none;">
                                <!-- Parking information will be inserted dynamically -->
                            </ul>
                        </div>

                        <hr class="section-divider">

                        <div class="info-group">
                            <h3>Important Villa Information</h3>
                            <!-- Important Villa Information will be inserted dynamically -->
                        </div>

                        <hr class="section-divider">

                        <div class="info-group warning">
                            <h3>St. Regis Hotel Note</h3>
                            <p>PLEASE NOTE THAT FOR ALL RESIDENCES AT BAHIA BEACH RESORT, THE ST. REGIS' POOL AREA IS UNAVAILABLE AND THE RESTAURANT RESTRICTS RESERVATIONS WHEN THE HOTEL HAS HIGH OCCUPANCY.</p>
                            <p>YOU WILL STILL HAVE FULL ACCESS TO THREE OTHER BEAUTIFUL AND MORE EXCLUSIVE MEMBERS' POOLS (TWO WITH FULL SERVICE,) BEACHES AND RESTAURANTS ESPECIALLY DEDICATED FOR MEMBERS AND RESIDENTS.</p>
                        </div>
                    </div>
                </div>

                <!-- Línea divisoria vertical -->
                <div class="vertical-divider"></div>
                
                <!-- Columna del menú -->
                <div class="menu-column">
                    <h2 class="column-title">Services Book</h2>
                    <div class="search-container">
                        <input type="text" id="global-search" placeholder="Search...">
                        <i class="material-icons search-icon">search</i>
                    </div>
                    <section id="sections-menu">
                        <div id="phonebook" class="sections-grid"></div>
                    </section>
                    <section id="contacts-display" class="hidden">
                        <div class="contacts-header">
                            <h2 id="current-category-title">Contactos</h2>
                        </div>
                        <div id="contacts-list" class="scrollable-list"></div>
                        <!-- Botón de retorno original oculto -->
                        <button id="back-to-menu" class="back-button" style="display: none;">
                            <i class="material-icons">arrow_back</i>
                            Back to Categories
                        </button>
                    </section>
                </div>
                
            </div>

            <!-- Modal para el Golf Cart -->
            <div id="golfCartInfoModal" class="modal">
                <div class="modal-content golf-cart-modal">
                    <span class="close" onclick="closeGolfCartInfoModal()">&times;</span>
                    <h2>Unit's Golf Cart</h2>
                    <div class="info-section">
                        <h3><button class="modal-link-btn" onclick="openGolfCartChargingModal();return false;">Charging Instructions</button></h3>
                        <p>The golf cart has a retractable cord on the back for charging. Please make sure to
                        retract it when in use so it is not hanging loose and gets damaged.</p>
                    </div>

                    <div class="info-section">
                        <!-- Modal Charging Instructions -->
                        <div id="golfCartChargingModal" class="modal">
                            <div class="modal-content">
                                <span class="close" onclick="closeGolfCartChargingModal()">&times;</span>
                                <h2>Charging Instructions</h2>
                                <p>The golf cart has a retractable cord on the back for charging. Please make sure to retract it when in use so it is not hanging loose and gets damaged.</p>
                            </div>
                        </div>
                        <h3><button class="modal-link-btn" onclick="openGolfCartParkingModal();return false;">Golf Cart Parking</button></h3>
                        <p>Park your cart at its designated parking space and appropriate parking at the different resort venues:</p>
                        <ul>
                            <li>Wellness Center</li>
                            <li>Boathouse/ Water Park</li>
                            <li>Beach Club pools, restaurants, concierge and golf shop</li>
                            <li>Cocoteros Diner</li>
                            <li>Sand Dollar Beach</li>
                            <li>Valet parking at the St. Regis Hotel</li>
                        </ul>
                        <!-- Modal Golf Cart Parking -->
                        <div id="golfCartParkingModal" class="modal">
                            <div class="modal-content">
                                <span class="close" onclick="closeGolfCartParkingModal()">&times;</span>
                                <h2>Golf Cart Parking</h2>
                                <ul>
                                    <li>Wellness Center</li>
                                    <li>Boathouse/ Water Park</li>
                                    <li>Beach Club pools, restaurants, concierge and golf shop</li>
                                    <li>Cocoteros Diner</li>
                                    <li>Sand Dollar Beach</li>
                                    <li>Valet parking at the St. Regis Hotel</li>
                                </ul>
                                <p>Park your cart at its designated parking space and appropriate parking at the different resort venues.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="golfCartRulesModal" class="modal">
                <div class="modal-content golf-cart-modal">
                    <span class="close" onclick="closeGolfCartRulesModal()">&times;</span>
                    <h2>Unit's Golf Cart</h2>
                    <div class="info-section warning">
                        <h3>Rules and Regulations</h3>
                        <ul>
                            <li>It's prohibited for kids and adults with no driver's license to drive the golf cart</li>
                            <li>Kids aren't allowed to drive, not even with an adult on the side or carrying them on the laps</li>
                            <li>Excessive speeding, joy riding, golf course or golf course path riding, beach, sand or offroad riding, disregard of traffic signs, or any type of unreasonable activity with the golf cart will not be tolerated by the development</li>
                        </ul>
                        <p class="warning-text">Local security enforces these restrictions with a fine and you will not be able to use the golf cart for the reminder of the stay.</p>
                    </div>
                </div>
            </div>


            <!-- Modal para Golf Rates -->
            <!-- Modal para Golf Shop -->
            <div id="golfRatesModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeGolfRatesModal()">&times;</span>
                    <h2>Golf Shop - Rates and Schedules</h2>
                        <iframe 
                        src="/src/html/pages/golfrates.html"
                        width="100%" 
                    height="700" 
                    style="border:none; border-radius:12px; background:white; min-height:500px;">
                    </iframe>

                </div>
            </div>

            <!-- Modal para Tennis -->
            <div id="tennisModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeTennisModal()">&times;</span>
                    <h2>Tennis Rates and Schedules</h2>

                    
                    <div class="info-section">
                        <h3>Court Reservations</h3>
                        <p><strong>Complimentary with your resort fee</strong></p>
                        <ul class="info-list" style="list-style:none;">
                            <li>Four tennis courts available:
                                <ul>
                                    <li>Clay Courts: #1 and #3</li>
                                    <li>Hard Courts: #2 and #4</li>
                                </ul>
                            </li>
                            <li>Reservations:
                                <ul>
                                    <li>Choose your preferred day and time</li>
                                    <li>Bahia Beach will check court availability</li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div class="info-section">
                        <h3>Tennis Lessons</h3>
                        <ul class="info-list" style="list-style:none;">
                            <li>Rate: $150 (Non-Members)</li>
                            <li>Scheduling:
                                <ul style="list-style:none;">
                                    <li>Choose your preferred day and time</li>
                                    <li>Bahia Beach will verify instructor availability</li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div class="info-section">
                        <h3>Tennis Clinics</h3>
                        <ul class="info-list" >
                            <li>Rate: $40 (Non-Members)</li>
                        </ul>
                    </div>

                    <p class="rates-note">* Tennis lessons and clinics rates are subject to change and do not include Puerto Rico Tax (11.5%)</p>
                </div>
            </div>

            <!-- Modal para Cleaning Fees -->
            <div id="cleaningFeesModal" class="modal">
                <div class="modal-content" style="min-width:350px; min-height:380px; padding:0;">
                    <button class="modal-close-btn" onclick="closeCleaningFeesModal()">
                        <i class="fas fa-times"></i>
                    </button>
                    <iframe 
                        src="/src/html/pages/cleaning.html" 
                        style="width:100%;height:380px;border:none;border-radius:18px;overflow:hidden;background:transparent;"
                        title="Cleaning Services"
                        loading="lazy"
                        referrerpolicy="no-referrer"
                    ></iframe>
                </div>
            </div>

            <!-- Modal para Grocery Shopping -->
            <div id="groceryShoppingModal" class="modal">
  <div class="modal-content" style="min-width:350px; min-height:380px; padding:0;">
    <button class="modal-close-btn" onclick="closeGroceryShoppingModal()">
      <i class="fas fa-times"></i>
    </button>
    <iframe 
      src="/src/html/pages/shopping.html" 
      style="width:100%;height:380px;border:none;border-radius:18px;overflow:hidden;background:transparent;"
      title="Grocery Shopping Services"
      loading="lazy"
      referrerpolicy="no-referrer"
    ></iframe>
  </div>
</div>
<!-- groceryShoppingModal END -->

            <!-- Modal para Kids Club -->
            <div id="kidsClubModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeKidsClubModal()">&times;</span>
                    <h2>👦 🐢 St. Regis Tortuga Kid's Club</h2>
                    <p>☎️ Phone: 787-809-8000</p>

                    
                    <div class="info-section">
                        <h3>About Tortuga Kid's Club</h3>
                        <p>As part of the Family Traditions program at St. Regis, The Tortuga Kid's Club incorporates an educationally based St. Regis children's play center and video games for older children while a separate area offers a variety of stimulating activities for younger children.</p>
                        <p>Children are welcome to access the club with a parent or enroll their children as often as they wish, based on program availability.</p>
                    </div>

                    <div class="info-section">
                        <h3>Hours of Operation</h3>
                        <ul class="info-list">
                            <li>Monday – Sunday: 10:00 am - 5:00 pm</li>
                        </ul>
                    </div>

                    <div class="info-section">
                        <h3>Rates</h3>
                        <ul class="info-list">
                            <li>One Hour: $30.00 USD per child</li>
                            <li>Two Hours: $45.00 USD per child</li>
                            <li>Half Day: $75.00 USD per child (Snack Included)</li>
                            <li>Four Hours: $90.00 USD per child</li>
                            <li>Full Day: $125.00 per child (Lunch and Snack Included)</li>
                            <li>Additional Half Hour: $15.00 USD per child</li>
                        </ul>
                        <p class="rates-note">* All rates are subject to taxes and gratuity</p>
                    </div>

                    <div class="info-section warning">
                        <h3>Important Information</h3>
                        <ul class="info-list">
                            <li>Every Child participating in the program must be at least four (4) years old and no older than twelve (12) years old</li>
                            <li>Every child participating in the program must be fully potty trained and must be able to re-dress themselves without assistance</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script type="module">
        // Importar las dependencias necesarias
        import { initializeProperty } from '../../js/propertyRenderer.js';
        import * as modalFunctions from '../../js/modals.js';

        // Hacer las funciones modales disponibles globalmente
        Object.assign(window, modalFunctions);

        // Hacer las funciones modales disponibles globalmente
        Object.assign(window, modalFunctions);

        // Inicializar la propiedad
        document.addEventListener('DOMContentLoaded', () => {
            // Configurar manejadores de eventos para los botones de cierre
            document.querySelectorAll('.close').forEach(button => {
                button.addEventListener('click', () => {
                    const modalType = button.getAttribute('data-modal');
                    switch(modalType) {
                        case 'golfCart':
                            closeGolfCartModal();
                            break;
                        case 'golfRates':
                            closeGolfRatesModal();
                            break;
                        case 'tennis':
                            closeTennisModal();
                            break;
                        case 'kidsClub':
                            closeKidsClubModal();
                            break;
                        case 'groceryShopping':
                        closeGroceryShoppingModal();
                        break;
                        case 'cleaningFees':
                            closeCleaningFeesModal();
                            break;
                    }
                });
            });
            initializeProperty();
            
            // Configurar los event listeners para el modal del mapa
            const openMapBtn = document.getElementById('openMapButton');
            const closeMapBtn = document.getElementById('closeMapButton');
            
            if (openMapBtn) openMapBtn.addEventListener('click', openMapModal);
            if (closeMapBtn) closeMapBtn.addEventListener('click', closeMapModal);
        });

        // Esperar a que el DOM esté completamente cargado
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Inicializar la propiedad
                await initializeProperty();
                console.log('Propiedad inicializada correctamente');

                // Cargar el script principal
                await import('../../../script.js');
                console.log('Script principal cargado correctamente');

                // Verificar los modales
                const modals = document.querySelectorAll('.modal');
                console.log('Modales encontrados:', modals.length);
            } catch (error) {
                console.error('Error durante la inicialización:', error);
            }
        });
    </script>
</body>
</html>
